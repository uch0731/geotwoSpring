<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Hello</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<div class="container">
    <label for="schema">Host</label>
    <input type="text" id="schema" placeholder="Host"><br>
    <button onclick="postSchema()">Table List 보기</button>
</div>
<script>
    function postSchema() {
      const xhr = new XMLHttpRequest();
      const url = '/show';
      const schema = document.getElementById('schema').value;
      const params = `schema=${schema}`;
      xhr.open('POST', url, true);
      xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

      xhr.onreadystatechange = function() {
        if (this.readyState === 4 && this.status === 200) {
          const result = JSON.parse(this.responseText);
          if (result.status === 'success') {
            alert('Connection successful');
            location.replace('/success');
          } else {
            alert('Connection failed');
            location.replace('/ex');
          }
        }
    };

      xhr.send(params);
    }
  </script>
</body>
</html>
